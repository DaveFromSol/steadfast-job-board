<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Apply for Position - Steadfast Staffing</title>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;800&display=swap');
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, #2c5282 0%, #2d3748 100%);
      min-height: 100vh;
      padding: 20px;
      color: #2d3748;
    }

    .container {
      max-width: 800px;
      margin: 0 auto;
      background: #ffffff;
      border-radius: 15px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
      overflow: hidden;
    }

    .header {
      background: linear-gradient(135deg, #3182ce 0%, #2c5282 100%);
      color: white;
      padding: 40px;
      text-align: center;
    }

    .header h1 {
      font-size: 32px;
      font-weight: 700;
      margin-bottom: 10px;
      text-shadow: 0 2px 10px rgba(0,0,0,0.3);
    }

    .header p {
      font-size: 18px;
      opacity: 0.9;
      font-weight: 400;
    }

    .job-info {
      background: #f7fafc;
      padding: 25px 40px;
      border-bottom: 1px solid #e2e8f0;
    }

    .job-title {
      font-size: 24px;
      font-weight: 600;
      color: #e53e3e;
      margin-bottom: 10px;
    }

    .job-details {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      margin-bottom: 15px;
    }

    .job-detail {
      background: white;
      padding: 8px 16px;
      border-radius: 6px;
      font-size: 14px;
      font-weight: 500;
      color: #2d3748;
      border: 1px solid #e2e8f0;
    }

    .job-description {
      color: #4a5568;
      line-height: 1.6;
      margin-top: 10px;
    }

    .form-container {
      padding: 40px;
    }

    .form-section {
      margin-bottom: 30px;
    }

    .section-title {
      font-size: 20px;
      font-weight: 600;
      color: #2d3748;
      margin-bottom: 20px;
      padding-bottom: 10px;
      border-bottom: 2px solid #e2e8f0;
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-row {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
    }

    label {
      display: block;
      font-weight: 600;
      color: #2d3748;
      margin-bottom: 8px;
      font-size: 14px;
    }

    .required {
      color: #e53e3e;
    }

    input, select, textarea {
      width: 100%;
      padding: 12px 16px;
      font-size: 16px;
      font-family: 'Poppins', sans-serif;
      border: 2px solid #e2e8f0;
      border-radius: 8px;
      background: #ffffff;
      color: #2d3748;
      transition: all 0.3s ease;
      outline: none;
    }

    input:focus, select:focus, textarea:focus {
      border-color: #3182ce;
      box-shadow: 0 0 0 3px rgba(49, 130, 206, 0.1);
    }

    textarea {
      resize: vertical;
      min-height: 120px;
    }

    .file-upload {
      position: relative;
      display: inline-block;
      width: 100%;
    }

    .file-upload input[type="file"] {
      position: absolute;
      opacity: 0;
      width: 100%;
      height: 100%;
      cursor: pointer;
    }

    .file-upload-label {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      padding: 20px;
      border: 2px dashed #cbd5e0;
      border-radius: 8px;
      background: #f7fafc;
      color: #4a5568;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .file-upload-label:hover {
      border-color: #3182ce;
      background: #ebf8ff;
      color: #3182ce;
    }

    .file-upload.has-file .file-upload-label {
      border-color: #38a169;
      background: #f0fff4;
      color: #38a169;
    }

    .file-info {
      margin-top: 8px;
      font-size: 12px;
      color: #718096;
    }

    .checkbox-group {
      display: flex;
      align-items: flex-start;
      gap: 12px;
      margin-top: 10px;
    }

    .checkbox-group input[type="checkbox"] {
      width: auto;
      margin: 0;
    }

    .checkbox-group label {
      margin: 0;
      font-weight: 400;
      font-size: 14px;
      line-height: 1.5;
      cursor: pointer;
    }

    .submit-section {
      background: #f7fafc;
      padding: 30px 40px;
      border-top: 1px solid #e2e8f0;
      text-align: center;
    }

    .submit-btn {
      background: linear-gradient(135deg, #3182ce 0%, #2c5282 100%);
      color: white;
      padding: 15px 40px;
      font-size: 18px;
      font-weight: 600;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(49, 130, 206, 0.3);
      margin-right: 15px;
    }

    .submit-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(49, 130, 206, 0.4);
    }

    .submit-btn:disabled {
      background: #a0aec0;
      cursor: not-allowed;
      transform: none;
    }

    .back-btn {
      background: #e2e8f0;
      color: #4a5568;
      padding: 15px 30px;
      font-size: 16px;
      font-weight: 500;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
      text-decoration: none;
      display: inline-block;
    }

    .back-btn:hover {
      background: #cbd5e0;
      color: #2d3748;
    }

    .success-message {
      background: #f0fff4;
      color: #22543d;
      padding: 20px;
      border-radius: 8px;
      border: 1px solid #9ae6b4;
      margin-bottom: 20px;
      display: none;
    }

    .error-message {
      background: #fed7d7;
      color: #c53030;
      padding: 20px;
      border-radius: 8px;
      border: 1px solid #feb2b2;
      margin-bottom: 20px;
      display: none;
    }

    .loading {
      display: none;
      text-align: center;
      padding: 20px;
    }

    .spinner {
      border: 3px solid #f3f3f3;
      border-top: 3px solid #3182ce;
      border-radius: 50%;
      width: 30px;
      height: 30px;
      animation: spin 1s linear infinite;
      margin: 0 auto 10px;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .privacy-notice {
      background: #ebf8ff;
      padding: 20px;
      border-radius: 8px;
      border-left: 4px solid #3182ce;
      margin-bottom: 20px;
      font-size: 14px;
      color: #2c5282;
    }

    /* Mobile Optimization */
    @media (max-width: 768px) {
      body {
        padding: 10px;
      }

      .header {
        padding: 30px 20px;
      }

      .header h1 {
        font-size: 26px;
      }

      .header p {
        font-size: 16px;
      }

      .job-info {
        padding: 20px;
      }

      .job-title {
        font-size: 20px;
      }

      .job-details {
        flex-direction: column;
        gap: 10px;
      }

      .form-container {
        padding: 25px 20px;
      }

      .form-row {
        grid-template-columns: 1fr;
        gap: 15px;
      }

      .submit-section {
        padding: 25px 20px;
      }

      .submit-btn {
        width: 100%;
        margin-right: 0;
        margin-bottom: 15px;
      }

      .back-btn {
        width: 100%;
        text-align: center;
      }
    }

    @media (max-width: 480px) {
      .header {
        padding: 25px 15px;
      }

      .form-container {
        padding: 20px 15px;
      }

      .submit-section {
        padding: 20px 15px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>Apply for Position</h1>
      <p>Join the Steadfast Staffing team today</p>
    </div>

    <div class="job-info" id="jobInfo">
      <div class="job-title" id="jobTitle">Loading...</div>
      <div class="job-details" id="jobDetails"></div>
      <div class="job-description" id="jobDescription"></div>
    </div>

    <div class="form-container">
      <div class="success-message" id="successMessage"></div>
      <div class="error-message" id="errorMessage"></div>
      <div class="loading" id="loadingMessage">
        <div class="spinner"></div>
        <p>Submitting your application...</p>
      </div>

      <form id="applicationForm">
        <!-- Personal Information -->
        <div class="form-section">
          <h3 class="section-title">Personal Information</h3>
          
          <div class="form-row">
            <div class="form-group">
              <label for="firstName">First Name <span class="required">*</span></label>
              <input type="text" id="firstName" name="firstName" required>
            </div>
            <div class="form-group">
              <label for="lastName">Last Name <span class="required">*</span></label>
              <input type="text" id="lastName" name="lastName" required>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="email">Email Address <span class="required">*</span></label>
              <input type="email" id="email" name="email" required>
            </div>
            <div class="form-group">
              <label for="phone">Phone Number <span class="required">*</span></label>
              <input type="tel" id="phone" name="phone" required>
            </div>
          </div>

          <div class="form-group">
            <label for="address">Address</label>
            <input type="text" id="address" name="address" placeholder="Street Address">
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="city">City</label>
              <input type="text" id="city" name="city">
            </div>
            <div class="form-group">
              <label for="state">State</label>
              <select id="state" name="state">
                <option value="">Select State</option>
                <option value="CT">Connecticut</option>
                <option value="NY">New York</option>
                <option value="MA">Massachusetts</option>
                <option value="RI">Rhode Island</option>
                <option value="other">Other</option>
              </select>
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="zipCode">ZIP Code</label>
              <input type="text" id="zipCode" name="zipCode">
            </div>
            <div class="form-group">
              <label for="availability">Availability <span class="required">*</span></label>
              <select id="availability" name="availability" required>
                <option value="">Select Availability</option>
                <option value="immediate">Immediate</option>
                <option value="1-week">Within 1 week</option>
                <option value="2-weeks">Within 2 weeks</option>
                <option value="1-month">Within 1 month</option>
                <option value="other">Other</option>
              </select>
            </div>
          </div>
        </div>

        <!-- Employment Information -->
        <div class="form-section">
          <h3 class="section-title">Employment Information</h3>
          
          <div class="form-group">
            <label for="desiredSalary">Desired Salary</label>
            <input type="text" id="desiredSalary" name="desiredSalary" placeholder="e.g., $50,000 or Negotiable">
          </div>

          <div class="form-row">
            <div class="form-group">
              <label for="experience">Years of Experience <span class="required">*</span></label>
              <select id="experience" name="experience" required>
                <option value="">Select Experience</option>
                <option value="0-1">0-1 years</option>
                <option value="2-3">2-3 years</option>
                <option value="4-5">4-5 years</option>
                <option value="6-10">6-10 years</option>
                <option value="10+">10+ years</option>
              </select>
            </div>
            <div class="form-group">
              <label for="education">Highest Education</label>
              <select id="education" name="education">
                <option value="">Select Education</option>
                <option value="high-school">High School</option>
                <option value="associates">Associate's Degree</option>
                <option value="bachelors">Bachelor's Degree</option>
                <option value="masters">Master's Degree</option>
                <option value="phd">PhD</option>
                <option value="other">Other</option>
              </select>
            </div>
          </div>

          <div class="form-group">
            <label for="skills">Relevant Skills</label>
            <textarea id="skills" name="skills" placeholder="List your relevant skills, certifications, or technologies..."></textarea>
          </div>

          <div class="form-group">
            <label for="previousWork">Previous Work Experience</label>
            <textarea id="previousWork" name="previousWork" placeholder="Briefly describe your previous work experience..."></textarea>
          </div>
        </div>

        <!-- Documents -->
        <div class="form-section">
          <h3 class="section-title">Documents</h3>
          
          <div class="form-group">
            <label for="resume">Resume/CV <span class="required">*</span></label>
            <div class="file-upload">
              <input type="file" id="resume" name="resume" accept=".pdf,.doc,.docx" required>
              <div class="file-upload-label">
                <span>📄</span>
                <span>Upload Resume (PDF, DOC, DOCX)</span>
              </div>
            </div>
            <div class="file-info">Maximum file size: 5MB</div>
          </div>

          <div class="form-group">
            <label for="coverLetter">Cover Letter (Optional)</label>
            <div class="file-upload">
              <input type="file" id="coverLetter" name="coverLetter" accept=".pdf,.doc,.docx">
              <div class="file-upload-label">
                <span>📝</span>
                <span>Upload Cover Letter (PDF, DOC, DOCX)</span>
              </div>
            </div>
            <div class="file-info">Maximum file size: 5MB</div>
          </div>
        </div>

        <!-- Additional Information -->
        <div class="form-section">
          <h3 class="section-title">Additional Information</h3>
          
          <div class="form-group">
            <label for="whyInterested">Why are you interested in this position?</label>
            <textarea id="whyInterested" name="whyInterested" placeholder="Tell us what interests you about this role and our company..."></textarea>
          </div>

          <div class="form-group">
            <label for="additionalInfo">Additional Comments</label>
            <textarea id="additionalInfo" name="additionalInfo" placeholder="Anything else you'd like us to know..."></textarea>
          </div>

          <div class="form-group">
            <label for="howHeard">How did you hear about us?</label>
            <select id="howHeard" name="howHeard">
              <option value="">Select Option</option>
              <option value="website">Company Website</option>
              <option value="job-board">Job Board</option>
              <option value="referral">Employee Referral</option>
              <option value="social-media">Social Media</option>
              <option value="recruiter">Recruiter</option>
              <option value="other">Other</option>
            </select>
          </div>
        </div>

        <!-- Privacy and Consent -->
        <div class="privacy-notice">
          <strong>Privacy Notice:</strong> By submitting this application, you consent to Steadfast Staffing collecting and processing your personal information for recruitment purposes. Your information will be kept confidential and used only for evaluating your application.
        </div>

        <div class="form-group">
          <div class="checkbox-group">
            <input type="checkbox" id="consent" name="consent" required>
            <label for="consent">I agree to the privacy policy and consent to the processing of my personal data <span class="required">*</span></label>
          </div>
        </div>

        <div class="form-group">
          <div class="checkbox-group">
            <input type="checkbox" id="newsletter" name="newsletter">
            <label for="newsletter">I would like to receive updates about future job opportunities</label>
          </div>
        </div>
      </form>
    </div>

    <div class="submit-section">
      <button type="submit" class="submit-btn" onclick="submitApplication()">Submit Application</button>
      <a href="javascript:history.back()" class="back-btn">Back to Jobs</a>
    </div>
  </div>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-storage.js"></script>

  <script>
    // Firebase configuration
    const firebaseConfig = {
      apiKey: "AIzaSyDtgmr4F5uRh4M_6OVQAd-7X3ZyLqmS0-I",
      authDomain: "steadfast-staffing.firebaseapp.com",
      databaseURL: "https://steadfast-staffing-default-rtdb.firebaseio.com",
      projectId: "steadfast-staffing",
      storageBucket: "steadfast-staffing.firebasestorage.app",
      messagingSenderId: "447949048982",
      appId: "1:447949048982:web:ae07174035184d4d0a86b7"
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();
    const storage = firebase.storage();

    // Get job information from URL parameters
    function getJobFromURL() {
      const urlParams = new URLSearchParams(window.location.search);
      const jobId = urlParams.get('job');
      const jobTitle = urlParams.get('title');
      const jobLocation = urlParams.get('location');
      const jobType = urlParams.get('type');
      const jobCategory = urlParams.get('category');
      const jobSalary = urlParams.get('salary');
      const jobDescription = urlParams.get('description');

      if (jobId) {
        // Load job from Firebase
        loadJobFromFirebase(jobId);
      } else if (jobTitle) {
        // Use URL parameters
        displayJobInfo({
          title: decodeURIComponent(jobTitle),
          location: decodeURIComponent(jobLocation || ''),
          type: decodeURIComponent(jobType || ''),
          category: decodeURIComponent(jobCategory || ''),
          salary: jobSalary ? decodeURIComponent(jobSalary) : null,
          description: jobDescription ? decodeURIComponent(jobDescription) : ''
        });
      } else {
        // Show generic application form
        displayJobInfo({
          title: "General Application",
          location: "Various Locations",
          type: "Multiple Types",
          category: "All Categories",
          description: "Thank you for your interest in Steadfast Staffing. Please fill out the application below and we'll match you with suitable opportunities."
        });
      }
    }

    // Load job from Firebase
    function loadJobFromFirebase(jobId) {
      database.ref(`jobs/${jobId}`).once('value')
        .then((snapshot) => {
          const job = snapshot.val();
          if (job) {
            displayJobInfo(job);
          } else {
            showError('Job not found');
          }
        })
        .catch((error) => {
          console.error('Error loading job:', error);
          showError('Error loading job information');
        });
    }

    // Display job information
    function displayJobInfo(job) {
      document.getElementById('jobTitle').textContent = job.title;
      
      const details = [];
      if (job.location) details.push(`<span class="job-detail">📍 ${job.location}</span>`);
      if (job.type) details.push(`<span class="job-detail">⏰ ${job.type}</span>`);
      if (job.category) details.push(`<span class="job-detail">🏢 ${job.category}</span>`);
      if (job.salary) details.push(`<span class="job-detail">💰 ${job.salary}</span>`);
      
      document.getElementById('jobDetails').innerHTML = details.join('');
      
      if (job.description) {
        document.getElementById('jobDescription').textContent = job.description;
      } else {
        document.getElementById('jobDescription').style.display = 'none';
      }
    }

    // File upload handling
    function setupFileUploads() {
      const fileInputs = document.querySelectorAll('input[type="file"]');
      
      fileInputs.forEach(input => {
        input.addEventListener('change', function() {
          const fileUpload = this.closest('.file-upload');
          const label = fileUpload.querySelector('.file-upload-label span:last-child');
          
          if (this.files.length > 0) {
            const file = this.files[0];
            const maxSize = 5 * 1024 * 1024; // 5MB
            
            if (file.size > maxSize) {
              alert('File size exceeds 5MB limit. Please choose a smaller file.');
              this.value = '';
              return;
            }
            
            fileUpload.classList.add('has-file');
            label.textContent = `✓ ${file.name}`;
          } else {
            fileUpload.classList.remove('has-file');
            if (this.id === 'resume') {
              label.textContent = 'Upload Resume (PDF, DOC, DOCX)';
            } else {
              label.textContent = 'Upload Cover Letter (PDF, DOC, DOCX)';
            }
          }
        });
      });
    }

    // Submit application
    async function submitApplication() {
      const form = document.getElementById('applicationForm');
      
      // Validate required fields
      if (!form.checkValidity()) {
        form.reportValidity();
        return;
      }

      // Check if resume is uploaded
      const resumeInput = document.getElementById('resume');
      if (!resumeInput.files.length) {
        showError('Please upload your resume');
        return;
      }

      // Show loading
      showLoading(true);

      try {
        console.log('Starting application submission...');
        
        // Get all form data first
        const formData = new FormData(form);
        const urlParams = new URLSearchParams(window.location.search);
        
        // Prepare basic application data (without files first)
        const applicationData = {
          // Personal Information
          firstName: formData.get('firstName') || '',
          lastName: formData.get('lastName') || '',
          email: formData.get('email') || '',
          phone: formData.get('phone') || '',
          address: formData.get('address') || '',
          city: formData.get('city') || '',
          state: formData.get('state') || '',
          zipCode: formData.get('zipCode') || '',
          availability: formData.get('availability') || '',
          
          // Employment Information
          desiredSalary: formData.get('desiredSalary') || '',
          experience: formData.get('experience') || '',
          education: formData.get('education') || '',
          skills: formData.get('skills') || '',
          previousWork: formData.get('previousWork') || '',
          
          // Additional Information
          whyInterested: formData.get('whyInterested') || '',
          additionalInfo: formData.get('additionalInfo') || '',
          howHeard: formData.get('howHeard') || '',
          
          // Consent
          newsletter: formData.get('newsletter') === 'on',
          
          // Job Information
          jobTitle: urlParams.get('title') || document.getElementById('jobTitle').textContent,
          jobLocation: urlParams.get('location') || '',
          jobType: urlParams.get('type') || '',
          jobCategory: urlParams.get('category') || '',
          jobSalary: urlParams.get('salary') || '',
          jobDescription: urlParams.get('description') || '',
          
          // Metadata
          submittedAt: new Date().toISOString(),
          submittedDate: new Date().toLocaleDateString(),
          submittedTime: new Date().toLocaleTimeString(),
          status: 'new',
          source: 'website',
          
          // Placeholder for files
          files: {}
        };

        console.log('Application data prepared:', applicationData);

        // Save basic application first
        const applicationRef = await database.ref('applications').push(applicationData);
        const applicationId = applicationRef.key;
        console.log('Basic application saved with ID:', applicationId);

        // Now try to upload files if they exist
        try {
          const files = {};
          
          if (resumeInput.files.length > 0) {
            console.log('Uploading resume...');
            files.resume = await uploadFile(resumeInput.files[0], 'resumes');
            console.log('Resume uploaded successfully');
          }
          
          const coverLetterInput = document.getElementById('coverLetter');
          if (coverLetterInput.files.length > 0) {
            console.log('Uploading cover letter...');
            files.coverLetter = await uploadFile(coverLetterInput.files[0], 'cover-letters');
            console.log('Cover letter uploaded successfully');
          }

          // Update application with file URLs
          if (Object.keys(files).length > 0) {
            await database.ref(`applications/${applicationId}/files`).set(files);
            console.log('Files updated in application');
          }

        } catch (fileError) {
          console.warn('File upload failed, but application was saved:', fileError);
          // Don't fail the entire application if file upload fails
        }
        
        showSuccess('Application submitted successfully! We\'ll be in touch soon.');
        
        // Clear form after successful submission
        setTimeout(() => {
          form.reset();
          setupFileUploads();
          
          // Reset file upload displays
          document.querySelectorAll('.file-upload').forEach(upload => {
            upload.classList.remove('has-file');
          });
          
          // Reset labels safely
          const resumeLabel = document.querySelector('input[type="file"]#resume');
          if (resumeLabel && resumeLabel.nextElementSibling) {
            const labelSpan = resumeLabel.nextElementSibling.querySelector('span:last-child');
            if (labelSpan) labelSpan.textContent = 'Upload Resume (PDF, DOC, DOCX)';
          }
          
          const coverLabel = document.querySelector('input[type="file"]#coverLetter');
          if (coverLabel && coverLabel.nextElementSibling) {
            const labelSpan = coverLabel.nextElementSibling.querySelector('span:last-child');
            if (labelSpan) labelSpan.textContent = 'Upload Cover Letter (PDF, DOC, DOCX)';
          }
        }, 2000);

      } catch (error) {
        console.error('Error submitting application:', error);
        showError('Error submitting application. Please try again. If the problem persists, you can email your application directly.');
      } finally {
        showLoading(false);
      }
    }

    // Upload file to Firebase Storage
    async function uploadFile(file, folder) {
      try {
        const timestamp = Date.now();
        const filename = `${timestamp}_${file.name.replace(/[^a-zA-Z0-9.-]/g, '_')}`;
        const storageRef = storage.ref(`${folder}/${filename}`);
        
        const snapshot = await storageRef.put(file);
        const downloadURL = await snapshot.ref.getDownloadURL();
        
        return {
          filename: file.name,
          url: downloadURL,
          size: file.size,
          type: file.type,
          uploadedAt: new Date().toISOString()
        };
      } catch (error) {
        console.error('File upload error:', error);
        throw new Error(`Failed to upload ${file.name}: ${error.message}`);
      }
    }

    // Show success message
    function showSuccess(message) {
      const successEl = document.getElementById('successMessage');
      successEl.textContent = message;
      successEl.style.display = 'block';
      
      // Scroll to top
      window.scrollTo({ top: 0, behavior: 'smooth' });
      
      // Hide after 5 seconds
      setTimeout(() => {
        successEl.style.display = 'none';
      }, 5000);
    }

    // Show error message
    function showError(message) {
      const errorEl = document.getElementById('errorMessage');
      errorEl.textContent = message;
      errorEl.style.display = 'block';
      
      // Scroll to top
      window.scrollTo({ top: 0, behavior: 'smooth' });
      
      // Hide after 5 seconds
      setTimeout(() => {
        errorEl.style.display = 'none';
      }, 5000);
    }

    // Show/hide loading
    function showLoading(show) {
      const loadingEl = document.getElementById('loadingMessage');
      const submitBtn = document.querySelector('.submit-btn');
      
      if (show) {
        loadingEl.style.display = 'block';
        submitBtn.disabled = true;
        submitBtn.textContent = 'Submitting...';
      } else {
        loadingEl.style.display = 'none';
        submitBtn.disabled = false;
        submitBtn.textContent = 'Submit Application';
      }
    }

    // Initialize page
    document.addEventListener('DOMContentLoaded', () => {
      getJobFromURL();
      setupFileUploads();
      
      // Add form submit handler
      document.getElementById('applicationForm').addEventListener('submit', (e) => {
        e.preventDefault();
        submitApplication();
      });
    });
  </script>
</body>
</html>